from flask import Flask, request
from flask_cors import CORS
import time
import json
import ast
from abdesign.util import create_annotation
from abdesign.util import export_to_json

app = Flask(__name__)
CORS(app)

@app.route("/",methods=['POST'])
def get_current_time():
    datastring = str(request.data.decode("utf-8"))
    #print(datastring)
    data_json = ast.literal_eval(datastring)
    print(data_json)
    results = {
        "annotation": {"kabat":    [{"amino_acid":"Q", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"4", "frequency":"0.98"}, {"amino_acid":"L", "pos":"5", "frequency":"0.1"},{"amino_acid":"G", "pos":"6", "frequency":"0.97"},{"amino_acid":"A", "pos":"7", "frequency":"0.98"}, {"amino_acid":"K", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"8", "frequency":"0.97"},{"amino_acid":"I", "pos":"9", "frequency":"0.98"}, {"amino_acid":"R", "pos":"10", "frequency":"0.1"},{"amino_acid":"G", "pos":"11", "frequency":"0.97"},{"amino_acid":"T", "pos":"12", "frequency":"0.98"}, {"amino_acid":"V", "pos":"13", "frequency":"0.1"},{"amino_acid":"G", "pos":"14", "frequency":"0.97"},{"amino_acid":"A", "pos":"15", "frequency":"0.98"}, {"amino_acid":"L", "pos":"16", "frequency":"0.1"},{"amino_acid":"G", "pos":"17", "frequency":"0.97"},{"amino_acid":"A", "pos":"18", "frequency":"0.98"}, {"amino_acid":"L", "pos":"19", "frequency":"0.1"},{"amino_acid":"G", "pos":"20", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"}
            ,{"amino_acid":"C", "pos":"1", "frequency":"0.98"}, {"amino_acid":"D", "pos":"2", "frequency":"0.1"},{"amino_acid":"E", "pos":"3", "frequency":"0.97"},{"amino_acid":"F", "pos":"1", "frequency":"0.98"}, {"amino_acid":"H", "pos":"2", "frequency":"0.1"},{"amino_acid":"I", "pos":"3", "frequency":"0.97"},{"amino_acid":"K", "pos":"1", "frequency":"0.98"}, {"amino_acid":"M", "pos":"2", "frequency":"0.1"},{"amino_acid":"N", "pos":"3", "frequency":"0.97"},{"amino_acid":"P", "pos":"1", "frequency":"0.98"}, {"amino_acid":"Y", "pos":"2", "frequency":"0.1"},{"amino_acid":"P", "pos":"3", "frequency":"0.97"},{"amino_acid":"S", "pos":"1", "frequency":"0.98"}, {"amino_acid":"W", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"}],
            "imgt": [{"amino_acid":"C", "pos":"1", "frequency":"0.98"}, {"amino_acid":"G", "pos":"2", "frequency":"0.1"},{"amino_acid":"Y", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"Y", "pos":"1", "frequency":"0.98"}, {"amino_acid":"K", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"I", "pos":"1", "frequency":"0.98"}, {"amino_acid":"R", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"T", "pos":"1", "frequency":"0.98"}, {"amino_acid":"V", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"}
            ,{"amino_acid":"C", "pos":"1", "frequency":"0.98"}, {"amino_acid":"D", "pos":"2", "frequency":"0.1"},{"amino_acid":"E", "pos":"3", "frequency":"0.97"},{"amino_acid":"F", "pos":"1", "frequency":"0.98"}, {"amino_acid":"H", "pos":"2", "frequency":"0.1"},{"amino_acid":"I", "pos":"3", "frequency":"0.97"},{"amino_acid":"K", "pos":"1", "frequency":"0.98"}, {"amino_acid":"M", "pos":"2", "frequency":"0.1"},{"amino_acid":"N", "pos":"3", "frequency":"0.97"},{"amino_acid":"P", "pos":"1", "frequency":"0.98"}, {"amino_acid":"Y", "pos":"2", "frequency":"0.1"},{"amino_acid":"P", "pos":"3", "frequency":"0.97"},{"amino_acid":"S", "pos":"1", "frequency":"0.98"}, {"amino_acid":"W", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"L", "pos":"3", "frequency":"0.97"},{"amino_acid":"L", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"},{"amino_acid":"A", "pos":"1", "frequency":"0.98"}, {"amino_acid":"L", "pos":"2", "frequency":"0.1"},{"amino_acid":"G", "pos":"3", "frequency":"0.97"}]},
        "meta": {"chain": "Heavy", "iso_type":"diesdas", "species": "human", "sequence": data_json["sequence"]}
    }
    # new_obj = create_annotation(data_json["sequence"])
    # myobj = export_to_json(new_obj, to_file=False)
    # print(myobj)
#print(results)
    time.sleep(2)
    return {"data":results}